<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_04) on Sun Sep 29 15:58:25 GMT+08:00 2013 -->
<title>CountBuffer</title>
<meta name="date" content="2013-09-29">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="CountBuffer";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CountBuffer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../net/floodlightcontroller/counter/ConcurrentCounter.CountAtom.html" title="class in net.floodlightcontroller.counter"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../net/floodlightcontroller/counter/CounterStore.html" title="class in net.floodlightcontroller.counter"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?net/floodlightcontroller/counter/CountBuffer.html" target="_top">Frames</a></li>
<li><a href="CountBuffer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.floodlightcontroller.counter</div>
<h2 title="Class CountBuffer" class="title">Class CountBuffer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>net.floodlightcontroller.counter.CountBuffer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">CountBuffer</span>
extends java.lang.Object</pre>
<div class="block">Implements a circular buffer to store the last x time-based counter values.  This is pretty crumby
 implementation, basically wrapping everything with synchronized blocks, in order to ensure that threads
 which will be updating the series don't result in a thread which is reading the series getting stuck with
 a start date which does not correspond to the count values in getSeries.
 
 This could probably use a re-think...</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>kyle</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long[]</code></td>
<td class="colLast"><code><strong><a href="../../../net/floodlightcontroller/counter/CountBuffer.html#counterValues">counterValues</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../net/floodlightcontroller/counter/CountBuffer.html#currentIndex">currentIndex</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../net/floodlightcontroller/counter/ICounter.DateSpan.html" title="enum in net.floodlightcontroller.counter">ICounter.DateSpan</a></code></td>
<td class="colLast"><code><strong><a href="../../../net/floodlightcontroller/counter/CountBuffer.html#dateSpan">dateSpan</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../net/floodlightcontroller/counter/CountBuffer.html#seriesLength">seriesLength</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.Date</code></td>
<td class="colLast"><code><strong><a href="../../../net/floodlightcontroller/counter/CountBuffer.html#startDate">startDate</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../net/floodlightcontroller/counter/CountBuffer.html#CountBuffer(java.util.Date, net.floodlightcontroller.counter.ICounter.DateSpan, int)">CountBuffer</a></strong>(java.util.Date&nbsp;startDate,
           <a href="../../../net/floodlightcontroller/counter/ICounter.DateSpan.html" title="enum in net.floodlightcontroller.counter">ICounter.DateSpan</a>&nbsp;dateSpan,
           int&nbsp;seriesLength)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long[]</code></td>
<td class="colLast"><code><strong><a href="../../../net/floodlightcontroller/counter/CountBuffer.html#getSeries()">getSeries</a></strong>()</code>
<div class="block">Relatively slow method, expected to be called primarily from UI rather than from in-packet-path.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../net/floodlightcontroller/counter/CountBuffer.html#increment(java.util.Date, long)">increment</a></strong>(java.util.Date&nbsp;d,
         long&nbsp;delta)</code>
<div class="block">Increment the count associated with Date d, forgetting some of the older count values if necessary to ensure
 that the total span of time covered by this series corresponds to DateSpan * seriesLength (circular buffer).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../net/floodlightcontroller/counter/CountSeries.html" title="class in net.floodlightcontroller.counter">CountSeries</a></code></td>
<td class="colLast"><code><strong><a href="../../../net/floodlightcontroller/counter/CountBuffer.html#snapshot()">snapshot</a></strong>()</code>
<div class="block">Returns an immutable count series that represents a snapshot of this
 series at a specific moment in time.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="counterValues">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>counterValues</h4>
<pre>protected&nbsp;long[] counterValues</pre>
</li>
</ul>
<a name="startDate">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startDate</h4>
<pre>protected&nbsp;java.util.Date startDate</pre>
</li>
</ul>
<a name="dateSpan">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dateSpan</h4>
<pre>protected&nbsp;<a href="../../../net/floodlightcontroller/counter/ICounter.DateSpan.html" title="enum in net.floodlightcontroller.counter">ICounter.DateSpan</a> dateSpan</pre>
</li>
</ul>
<a name="currentIndex">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentIndex</h4>
<pre>protected&nbsp;int currentIndex</pre>
</li>
</ul>
<a name="seriesLength">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>seriesLength</h4>
<pre>protected&nbsp;int seriesLength</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CountBuffer(java.util.Date, net.floodlightcontroller.counter.ICounter.DateSpan, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CountBuffer</h4>
<pre>public&nbsp;CountBuffer(java.util.Date&nbsp;startDate,
           <a href="../../../net/floodlightcontroller/counter/ICounter.DateSpan.html" title="enum in net.floodlightcontroller.counter">ICounter.DateSpan</a>&nbsp;dateSpan,
           int&nbsp;seriesLength)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="increment(java.util.Date, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>increment</h4>
<pre>public&nbsp;void&nbsp;increment(java.util.Date&nbsp;d,
             long&nbsp;delta)</pre>
<div class="block">Increment the count associated with Date d, forgetting some of the older count values if necessary to ensure
 that the total span of time covered by this series corresponds to DateSpan * seriesLength (circular buffer).
 
 Note - fails silently if the Date falls prior to the start of the tracked count values.
 
 Note - this should be a reasonably fast method, though it will have to block if there is another thread reading the
 series at the same time.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>d</code> - </dd><dd><code>delta</code> - </dd></dl>
</li>
</ul>
<a name="getSeries()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSeries</h4>
<pre>public&nbsp;long[]&nbsp;getSeries()</pre>
<div class="block">Relatively slow method, expected to be called primarily from UI rather than from in-packet-path.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the count values associated with each time interval starting with startDate and demarc'ed by dateSpan</dd></dl>
</li>
</ul>
<a name="snapshot()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>snapshot</h4>
<pre>public&nbsp;<a href="../../../net/floodlightcontroller/counter/CountSeries.html" title="class in net.floodlightcontroller.counter">CountSeries</a>&nbsp;snapshot()</pre>
<div class="block">Returns an immutable count series that represents a snapshot of this
 series at a specific moment in time.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>CountSeries</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CountBuffer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../net/floodlightcontroller/counter/ConcurrentCounter.CountAtom.html" title="class in net.floodlightcontroller.counter"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../net/floodlightcontroller/counter/CounterStore.html" title="class in net.floodlightcontroller.counter"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?net/floodlightcontroller/counter/CountBuffer.html" target="_top">Frames</a></li>
<li><a href="CountBuffer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
